# Alippe Pro Backend

Бэкенд-сервер для Alippe Pro - образовательной платформы с функциями онлайн-обучения, курсов, игр и тренировок.

## Структура проекта

```
/src
  /api                     # API модули
    /v1                    # API версии 1
      /auth                # Аутентификация и авторизация
      /user                # Пользовательские API
      /courses             # API для курсов
      /books               # API для книг
      /payments            # API для платежей
  /config                  # Конфигурация приложения
    express.js             # Настройки Express
    socket.config.js       # Настройки для Socket.io
    database.js            # Настройки базы данных
  /core                    # Общие компоненты
    /middleware            # Промежуточные обработчики
    /utils                 # Утилиты
    /constants             # Константы
  /models                  # Модели MongoDB
  /scripts                 # Скрипты
  /socket                  # Логика для WebSockets
    /constants             # Константы сокет-событий
    /handlers              # Обработчики событий
    /utils                 # Утилиты для сокетов
    socket.service.js      # Главный сервис сокетов
  app.js                   # Настройка Express
  server.js                # Точка входа приложения
/tests                     # Тесты
  /integration             # Интеграционные тесты
  /e2e                     # End-to-end тесты
```

## Модуль сокетов

Модуль сокетов реорганизован по принципу разделения ответственности:

- **constants/events.js** - Константы для всех событий сокетов
- **utils/roomUtils.js** - Утилиты для работы с комнатами
- **utils/monitoringUtils.js** - Утилиты для мониторинга
- **handlers/roomHandlers.js** - Обработчики событий для управления комнатами
- **handlers/gameHandlers.js** - Обработчики игровых событий
- **socket.service.js** - Основной файл, который объединяет все компоненты

## Установка и запуск

1. Убедитесь, что у вас установлен Node.js (рекомендуется версия 18.x)
2. Клонируйте репозиторий
3. Установите зависимости: `npm install`
4. Создайте файл `.env` на основе `.env.example`
5. Запустите сервер:
   - Для разработки: `npm run dev`
   - Для продакшена: `npm start`

## Переменные окружения

- `PORT` - Порт для запуска сервера (по умолчанию 5001)
- `MONGODB_URI` - URI для подключения к MongoDB
- `JWT_ACCESS_SECRET` - Секретный ключ для JWT токенов доступа
- `JWT_REFRESH_SECRET` - Секретный ключ для JWT токенов обновления

## Структура API

API построено по принципу REST с использованием Express.js.
Основные эндпоинты:

- `/api/auth` - Аутентификация и авторизация
- `/api/users` - Операции с пользователями
- `/api/courses` - Курсы и уроки
- `/api/books` - Книги для чтения
- `/api/payments` - Платежная система

## Socket.io API

Проект использует Socket.io для реализации многопользовательских игр и реал-тайм функций.
Основные события:

- Создание и присоединение к комнатам
- Синхронизация состояния игры
- Управление вопросами и ответами
- Обработка отключений и переподключений

## Разработчики

- Автор проекта: Alippe Team 